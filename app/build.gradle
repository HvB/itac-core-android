plugins {
    id "com.github.hierynomus.license" version "0.14.0"
}

apply plugin: 'com.android.application'

license {
    header = rootProject.file('Header_GPLv3.txt')
    ext.yearsAS = '2016'
    ext.yearsAIP = '2016'
    ext.yearsUSMB = '2016-'+Calendar.getInstance().get(Calendar.YEAR)
    ext.authorAS = "Yassine Siela"
    ext.authorAIP = "AIP Primeca RAO"
    ext.authorUSMB = "UniversitÃ© Savoie Mont Blanc"
    sourceSets = project.sourceSets
    include('**/*.java')
    include('**/*.xml')
    exclude('**/ic_sync*.xml')
}

android {
    signingConfigs {
        TeamTitan {
            storeFile file('C:/MySources/Android/TitanTeamKeystore.jks')
            keyAlias 'AndroidTitanTeamDev'
        }
    }
    compileSdkVersion 27
    buildToolsVersion '27.0.3'
    defaultConfig {
        applicationId 'fr.learning_adventure.android.itac.gpl'
        minSdkVersion 15
        targetSdkVersion 22
        versionCode 60
        versionName '2.0'
    }
    // permet d'acceder au nom de la version via la resource R.string.versionName
    applicationVariants.all { variant ->
        variant.resValue "string", "versionName", variant.versionName
    }
    buildTypes {
        release {
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
            signingConfig signingConfigs.TeamTitan
        }
        Beta {
            renderscriptOptimLevel 3
            signingConfig signingConfigs.TeamTitan
            versionNameSuffix '.beta'
        }
        debug {
            applicationIdSuffix '.debug'
            versionNameSuffix '.debug'
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }


    // Specifies the flavor dimensions you want to use. The order in which you
    // list each dimension determines its priority, from highest to lowest,
    // when Gradle merges variant sources and configurations. You must assign
    // each product flavor you configure to one of the flavor dimensions.
    flavorDimensions "distribution"

    productFlavors {
//        ItacBeta {
//            minSdkVersion 15
//            applicationId 'fr.learning_adventure.android.itac'
//            signingConfig signingConfigs.TeamTitan
//            targetSdkVersion 15
//            versionCode 1
//            versionName '1.0'
//            versionNameSuffix '.beta'
//            dimension "test"
//        }
        development {
            dimension 'distribution'
        }
    }
}

dependencies {
    implementation fileTree(include: ['*.jar'], dir: 'libs')
    androidTestImplementation 'junit:junit:4.12'
    implementation 'com.android.support:appcompat-v7:27.1.1'
    //compile 'com.github.nkzawa:socket.io-client:0.4.1'
    implementation 'com.android.support:recyclerview-v7:27.1.1'
    implementation('io.socket:socket.io-client:0.8.3') {
        // excluding org.json which is provided by Android
        exclude group: 'org.json', module: 'json'
    }
}
